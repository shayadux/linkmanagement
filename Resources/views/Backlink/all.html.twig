<!doctype html>
<html>
<head>
    <style>
        tr, td{
            font-size: 14px;
            border: thin dotted black;
            padding: 6px;
        }

        th{
            padding: 5px;
            border: thin solid blue;
        }

        .hidden{
            display: none;
        }
    </style>
</head>
<body>
    <form id="search">
        <input type="text" id="searchQuery">
        <input type="submit" id="searchButton" value="submit">
    </form>

    <table>
        <thead>
            <tr>
                <th>Affiliate</th>
                <th>Display Text</th>
                <th>URL</th>
                <th>URL Status</th>
                <th>Anchor Text</th>
                <th>Anchor Status</th>
                <th>Alive</th>
                <th>Visible</th>
                <th>Nofollow</th>
                <th>Expiration</th>
                <th>Last Checked</th>
            </tr>
        </thead>
        <tbody class="data">
            {% for backlinkProfile in backlinks %}
            <tr id="{{ backlinkProfile.backlinkId }}">
                <td class="siteUrl"><a href="{{ backlinkProfile.siteUrl }}">Visit Site</a></td>
                <td class="displayTest">{{ backlinkProfile.display_text }}</td>
                <td class="url">{{ backlinkProfile.url }}</td>
                <td class="urlStatus">{{ backlinkProfile.url_status }}</td>
                <td class="anchorText">{{ backlinkProfile.anchor_text }}</td>
                <td class="anchorStatus">{{ backlinkProfile.anchor_status }}</td>
                <td class="alive">{{ backlinkProfile.alive }}</td>
                <td class="visible">{{ backlinkProfile.visible }}</td>
                <td class="nofollowStatus">{{ backlinkProfile.nofollow_status }}</td>
                <td class="expiration">{{ backlinkProfile.expiration }}</td>
                <td class="lastChecked">{{ backlinkProfile.last_checked }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% javascripts %}
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script>

        $(function() {

            // when the search form is submitted...
            $("#search").submit(function(e){

                // save the search query
                var searchQuery = $("#searchQuery").val();

                // find any table rows that are hidden from a previous search
                $("tr.hidden").each(function(index){
                    // ...and show them again
                    $(this).removeClass("hidden");
                });

                // find all the table rows inside the table body
                var $trArray = $("tbody > tr");

                // Go through every table row
                $trArray.each(function(index){

                    // if any of the table cells inside this table row contain the search query
                    if($(this).children().is(":contains('" + searchQuery + "')")){
                        console.log($(this).attr("id"));

                        // hide the table row
                        $(this).addClass("hidden");
                    }
                });

                e.preventDefault();
            });
        });

    </script>
    {% endjavascripts %}
</body>
</html>
